<!-- Contenedor principal dentro del header -->
<div class="flex justify-between items-center p-2 mx-2">

  <!-- Botón para cerrar el sidebar y párrafo Dashboard -->
  <div class="flex">
    @if (isAuthenticated && user?.emailVerified) {
      <button (click)="onToggleSidebar()" class="px-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-6 h-6 dark:text-gray-100" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
        </svg>
      </button>
    }
    <a routerLink="tool-panel" class="text-base ml-2 text-gray-500 dark:text-gray-100 hidden md:block">Dashboard</a>
  </div>

  <!-- Filtro Busqueda -->
  <div class="flex h-8 w-full md:w-1/3 mx-7 rounded-full border-gray-400 dark:border-gray-100 border-opacity-65 border bg-gray-50 dark:bg-gray-800 px-2">
    <input type="text" class="flex w-full bg-transparent px-3 text-gray-700 dark:text-gray-100 outline-0 font-sans" placeholder="Buscar" />
    <!-- Linea divisoria busqueda -->
    <div class="border-gray-400 dark:border-gray-100 border-opacity-70 my-1 border-l"></div>
    <!-- Botón con icono de lupa -->
    <button type="submit" class="relative rounded-full bg-transparent px-1 dark:text-gray-100">
      <svg class="fill-none size-5 dark:text-gray-100" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
        <g id="SVGRepo_iconCarrier">
          <path
            d="M14.9536 14.9458L21 21M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z"
            stroke="#999" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        </g>
      </svg>
    </button>
  </div>

  <!-- Icono usuario -->
  <div id="user" class="p-2">
    <button (click)="handleUserAction()">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-7 w-7 text-gray-400 dark:text-gray-100"
        viewBox="0 0 16 16">
        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
        <path fill-rule="evenodd"
          d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1" />
      </svg>
    </button>

    <!-- Mostrar el dropdown si está autenticado -->
    <!-- [ngClass] se usa para agregar o quitar clases CSS condicionalmente basándose en una expresión booleana. -->
    @if(isAuthenticated && user?.emailVerified) {
    <div #dropdownMenu [ngClass]="{
    'transition ease-out duration-300 transform opacity-100 scale-100': isDropdownUserOpen,
    'transition ease-in duration-75 transform opacity-0 scale-95': !isDropdownUserOpen
  }" class="absolute right-0 mt-[12px] w-32 rounded-md dark:text-gray-100 bg-gray-50 dark:bg-gray-800 dark:border-none border-gray-200 border shadow-md z-10">

      <a routerLink="/home/user/profile" class="flex justify-start p-2 hover:bg-emerald-100 dark:hover:bg-gray-700">
        <label class="ml-2 cursor-pointer">Perfil</label>
      </a>

      <a class="flex justify-start p-2 hover:bg-emerald-100 dark:hover:bg-gray-700">
        <label class="ml-2 cursor-pointer">Ajustes</label>
      </a>

      <a (click)="userLogOut()" class="flex justify-start p-2 hover:bg-emerald-100 dark:hover:bg-gray-700">
        <label class="ml-2 cursor-pointer">Salir</label>
      </a>
    </div>
    }
  </div>

</div>